
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 751 – A file format to list Python dependencies for installation reproducibility | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0751/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://peps.python.org/peps.rss">
    <meta property="og:title" content='PEP 751 – A file format to list Python dependencies for installation reproducibility | peps.python.org'>
    <meta property="og:description" content="This PEP proposes a new file format for dependency specification to enable reproducible installation in a Python environment. The format is designed to be human-readable and machine-generated. Installers consuming the file should be able to evaluate eac...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peps.python.org/pep-0751/">
    <meta property="og:site_name" content="Python Enhancement Proposals (PEPs)">
    <meta property="og:image" content="https://peps.python.org/_static/og-image.png">
    <meta property="og:image:alt" content="Python PEPs">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
    <meta name="description" content="This PEP proposes a new file format for dependency specification to enable reproducible installation in a Python environment. The format is designed to be human-readable and machine-generated. Installers consuming the file should be able to evaluate eac...">
    <meta name="theme-color" content="#3776ab">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 751</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 751 – A file format to list Python dependencies for installation reproducibility</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Brett Cannon &lt;brett&#32;&#97;t&#32;python.org&gt;</dd>
<dt class="field-even">Discussions-To<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/59173">Discourse thread</a></dd>
<dt class="field-odd">Status<span class="colon">:</span></dt>
<dd class="field-odd"><abbr title="Proposal under active discussion and revision">Draft</abbr></dd>
<dt class="field-even">Type<span class="colon">:</span></dt>
<dd class="field-even"><abbr title="Normative PEP with a new feature for Python, implementation change for CPython or interoperability standard for the ecosystem">Standards Track</abbr></dd>
<dt class="field-odd">Topic<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="../topic/packaging/">Packaging</a></dd>
<dt class="field-even">Created<span class="colon">:</span></dt>
<dd class="field-even">24-Jul-2024</dd>
<dt class="field-odd">Post-History<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/59173" title="Discourse thread">25-Jul-2024</a></dd>
<dt class="field-even">Replaces<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="../pep-0665/">665</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#locking-scenarios">Locking Scenarios</a><ul>
<li><a class="reference internal" href="#per-file-locking">Per-file Locking</a></li>
<li><a class="reference internal" href="#package-locking">Package Locking</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#file-name">File Name</a></li>
<li><a class="reference internal" href="#file-format">File Format</a><ul>
<li><a class="reference internal" href="#version"><code class="docutils literal notranslate"><span class="pre">version</span></code></a></li>
<li><a class="reference internal" href="#hash-algorithm"><code class="docutils literal notranslate"><span class="pre">hash-algorithm</span></code></a></li>
<li><a class="reference internal" href="#dependencies"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code></a></li>
<li><a class="reference internal" href="#file-locks"><code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code></a><ul>
<li><a class="reference internal" href="#file-locks-name"><code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code></a></li>
<li><a class="reference internal" href="#file-locks-marker-values"><code class="docutils literal notranslate"><span class="pre">[file-locks.marker-values]</span></code></a></li>
<li><a class="reference internal" href="#file-locks-wheel-tags"><code class="docutils literal notranslate"><span class="pre">file-locks.wheel-tags</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-lock"><code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code></a><ul>
<li><a class="reference internal" href="#package-lock-requires-python"><code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages"><code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code></a><ul>
<li><a class="reference internal" href="#packages-name"><code class="docutils literal notranslate"><span class="pre">packages.name</span></code></a></li>
<li><a class="reference internal" href="#packages-version"><code class="docutils literal notranslate"><span class="pre">packages.version</span></code></a></li>
<li><a class="reference internal" href="#packages-multiple-entries"><code class="docutils literal notranslate"><span class="pre">packages.multiple-entries</span></code></a></li>
<li><a class="reference internal" href="#packages-description"><code class="docutils literal notranslate"><span class="pre">packages.description</span></code></a></li>
<li><a class="reference internal" href="#packages-index-url"><code class="docutils literal notranslate"><span class="pre">packages.index-url</span></code></a></li>
<li><a class="reference internal" href="#packages-marker"><code class="docutils literal notranslate"><span class="pre">packages.marker</span></code></a></li>
<li><a class="reference internal" href="#packages-requires-python"><code class="docutils literal notranslate"><span class="pre">packages.requires-python</span></code></a></li>
<li><a class="reference internal" href="#packages-dependents"><code class="docutils literal notranslate"><span class="pre">packages.dependents</span></code></a></li>
<li><a class="reference internal" href="#packages-dependencies"><code class="docutils literal notranslate"><span class="pre">packages.dependencies</span></code></a></li>
<li><a class="reference internal" href="#packages-direct"><code class="docutils literal notranslate"><span class="pre">packages.direct</span></code></a></li>
<li><a class="reference internal" href="#packages-files"><code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code></a><ul>
<li><a class="reference internal" href="#packages-files-name"><code class="docutils literal notranslate"><span class="pre">packages.files.name</span></code></a></li>
<li><a class="reference internal" href="#packages-files-lock"><code class="docutils literal notranslate"><span class="pre">packages.files.lock</span></code></a></li>
<li><a class="reference internal" href="#packages-files-index-url"><code class="docutils literal notranslate"><span class="pre">packages.files.index-url</span></code></a></li>
<li><a class="reference internal" href="#packages-files-url"><code class="docutils literal notranslate"><span class="pre">packages.files.url</span></code></a></li>
<li><a class="reference internal" href="#packages-path"><code class="docutils literal notranslate"><span class="pre">packages.path</span></code></a></li>
<li><a class="reference internal" href="#packages-files-hash"><code class="docutils literal notranslate"><span class="pre">packages.files.hash</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-vcs"><code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code></a><ul>
<li><a class="reference internal" href="#packages-vcs-type"><code class="docutils literal notranslate"><span class="pre">packages.vcs.type</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-url"><code class="docutils literal notranslate"><span class="pre">packages.vcs.url</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-path"><code class="docutils literal notranslate"><span class="pre">packages.vcs.path</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-commit"><code class="docutils literal notranslate"><span class="pre">packages.vcs.commit</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-lock"><code class="docutils literal notranslate"><span class="pre">packages.vcs.lock</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-directory"><code class="docutils literal notranslate"><span class="pre">[packages.directory]</span></code></a><ul>
<li><a class="reference internal" href="#packages-directory-path"><code class="docutils literal notranslate"><span class="pre">packages.directory.path</span></code></a></li>
<li><a class="reference internal" href="#packages-directory-editable"><code class="docutils literal notranslate"><span class="pre">packages.directory.editable</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-tool"><code class="docutils literal notranslate"><span class="pre">[packages.tool]</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool"><code class="docutils literal notranslate"><span class="pre">[tool]</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#id1">Per-file locking</a></li>
<li><a class="reference internal" href="#per-package-locking">Per-package locking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expectations-for-lockers">Expectations for Lockers</a></li>
<li><a class="reference internal" href="#expectations-for-installers">Expectations for Installers</a><ul>
<li><a class="reference internal" href="#installing-for-per-file-locking">Installing for per-file locking</a><ul>
<li><a class="reference internal" href="#example-workflow">Example workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-for-package-locking">Installing for package locking</a><ul>
<li><a class="reference internal" href="#id2">Example workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#only-support-package-locking">Only support package locking</a></li>
<li><a class="reference internal" href="#specifying-a-new-core-metadata-version-that-requires-consistent-metadata-across-files">Specifying a new core metadata version that requires consistent metadata across files</a></li>
<li><a class="reference internal" href="#have-the-installer-do-dependency-resolution">Have the installer do dependency resolution</a></li>
<li><a class="reference internal" href="#requiring-specific-hash-algorithm-support">Requiring specific hash algorithm support</a></li>
<li><a class="reference internal" href="#file-naming">File naming</a><ul>
<li><a class="reference internal" href="#using-pylock-toml-as-the-file-name">Using <code class="docutils literal notranslate"><span class="pre">*.pylock.toml</span></code> as the file name</a></li>
<li><a class="reference internal" href="#using-pylock-as-the-file-name">Using <code class="docutils literal notranslate"><span class="pre">*.pylock</span></code> as the file name</a></li>
<li><a class="reference internal" href="#not-having-a-naming-convention-for-the-file">Not having a naming convention for the file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">File format</a><ul>
<li><a class="reference internal" href="#use-json-over-toml">Use JSON over TOML</a></li>
<li><a class="reference internal" href="#use-yaml-over-toml">Use YAML over TOML</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-keys">Other keys</a><ul>
<li><a class="reference internal" href="#multiple-hashes-per-file">Multiple hashes per file</a></li>
<li><a class="reference internal" href="#hashing-the-contents-of-the-lock-file-itself">Hashing the contents of the lock file itself</a></li>
<li><a class="reference internal" href="#recording-the-creation-date-of-the-lock-file">Recording the creation date of the lock file</a></li>
<li><a class="reference internal" href="#recording-the-package-indexes-used">Recording the package indexes used</a></li>
<li><a class="reference internal" href="#locking-build-requirements-for-sdists">Locking build requirements for sdists</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p>This PEP proposes a new file format for dependency specification
to enable reproducible installation in a Python environment. The format is
designed to be human-readable and machine-generated. Installers consuming the
file should be able to evaluate each package in question in isolation, with no
need for dependency resolution at install-time.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation" role="doc-backlink">Motivation</a></h2>
<p>Currently, no standard exists to:</p>
<ul class="simple">
<li>Specify what top-level dependencies should be installed into a Python
environment.</li>
<li>Create an immutable record, such as a lock file, of which dependencies were
installed.</li>
</ul>
<p>Considering there are at least five well-known solutions to this problem in the
community (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">freeze</span></code>, <a class="reference external" href="https://pypi.org/project/pip-tools/">pip-tools</a>, <a class="reference external" href="https://github.com/astral-sh/uv">uv</a>, <a class="reference external" href="https://python-poetry.org/">Poetry</a>, and <a class="reference external" href="https://pypi.org/project/pdm/">PDM</a>), there seems to
be an appetite for lock files in general.</p>
<p>Those tools also vary in what locking scenarios they support. For instance,
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">freeze</span></code> and pip-tools only generate lock files for the current
environment while PDM and Poetry try to lock for <em>any</em> environment to some
degree. And none of them directly support locking to specific files to install
which can be important for some workflows. There’s also concerns around the lack
of secure defaults in the face of supply chain attacks (e.g., always including
hashes for files). Finally, not all the formats are easy to audit to determine
what would be installed into an environment ahead of time.</p>
<p>The lack of a standard also has some drawbacks. For instance, any tooling that
wants to work with lock files must choose which format to support, potentially
leaving users unsupported (e.g., <a class="reference external" href="https://docs.github.com/en/code-security/dependabot">Dependabot</a> only supporting select tools,
same for cloud providers who can do dependency installations on your behalf,
etc.). It also impacts portability between tools, which causes vendor lock-in.
By not having compatibility and interoperability it fractures tooling around
lock files where both users and tools have to choose what lock file format to
use upfront and making it costly to use/switch to other formats. Rallying
around a single format removes that cost/barrier.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Much of the motivation from <a class="pep reference internal" href="../pep-0665/" title="PEP 665 – A file format to list Python dependencies for reproducibility of an application">PEP 665</a> also applies to this PEP.</p>
</div>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale" role="doc-backlink">Rationale</a></h2>
<p>The format is designed so that a <em>locker</em> which produces the lock file
and an <em>installer</em> which consumes the lock file can be separate tools. This
allows for situations such as cloud hosting providers to use their own installer
that’s optimized for their system which is independent of what locker the user
used to create their lock file.</p>
<p>The file format is designed to be human-readable. This is
so that the contents of the file can be audited by a human to make sure no
undesired dependencies end up being included in the lock file. It is also
designed to facilitate easy understanding of what would be installed from the
lock file without necessitating running a tool, once again to help with
auditing. Finally, the format is designed so that viewing a diff of the file is
easy by centralizing relevant details.</p>
<p>The file format is also designed to not require a resolver at install time.
Being able to analyze dependencies in isolation from one another when listed in
a lock file provides a few benefits. First, it supports auditing by making it
easy to figure out if a certain dependency would be installed for a certain
environment without needing to reference other parts of the file contextually.
It should also lead to faster installs which are much more frequent than
creating a lock file. Finally, the four tools mentioned in the <a class="reference internal" href="#motivation">Motivation</a>
section either already implement this approach of evaluating dependencies in
isolation or have suggested they could (in
<a class="reference external" href="https://discuss.python.org/t/lock-files-again-but-this-time-w-sdists/46593/83">Poetry’s case</a>).</p>
<section id="locking-scenarios">
<h3><a class="toc-backref" href="#locking-scenarios" role="doc-backlink">Locking Scenarios</a></h3>
<p>The lock file format is designed to support two locking scenarios. The format
should also be flexible enough that adding support for other locking scenarios
is possible via a separate PEP.</p>
<section id="per-file-locking">
<h4><a class="toc-backref" href="#per-file-locking" role="doc-backlink">Per-file Locking</a></h4>
<p><em>Per-file locking</em> operates under the premise that one wants to install exactly
the same files in any matching environment. As such, the lock file specifies
what files to install. There can be multiple environments specified in a
single file, each with their own set of files to install. By specifying the
exact files to install, installers avoid performing any resolution to decide what
to install.</p>
<p>The motivation for this approach to locking is for those who have controlled
environments that they work with. For instance, if you have specific, controlled
development and production environments then you can use per-file locking to
make sure the <strong>same</strong> files are installed in both environments for everyone.
This is similar to what <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">freeze</span></code> and <a class="reference external" href="https://pypi.org/project/pip-tools/">pip-tools</a>
support, but with more strictness of the exact files as well as incorporating
support to specify the locked files for multiple environments in the same file.</p>
<p>Per-file locking should be used when the installation attempt should fail
outright if there is no explicitly pre-approved set of installation artifacts
for the target platform. For example: locking the deployment dependencies for a
managed web service.</p>
</section>
<section id="package-locking">
<h4><a class="toc-backref" href="#package-locking" role="doc-backlink">Package Locking</a></h4>
<p><em>Package locking</em> lists the packages and their versions that <em>may</em> apply to any
environment being installed for. The list of packages and their versions are
evaluated individually and independently from any other packages and versions
listed in the file. This allows installation to be linear – read each package
and version and make an isolated decision as to whether it should be installed.
This avoids requiring the installer to perform a <em>resolution</em> (i.e.
determine what to install based on what else is to be installed).</p>
<p>The motivation of this approach comes from
<a class="reference external" href="https://frostming.com/en/2024/pdm-lockfile/">PDM lock files</a>. By listing the
potential packages and versions that may be installed, what’s installed is
controlled in a way that’s easy to reason about. This also allows for not
specifying the exact environments that would be supported by the lock file so
there’s more flexibility for what environments are compatible with the lock
file. This approach supports scenarios like open-source projects that want to
lock what people should use to build the documentation without knowing upfront
what environments their contributors are working from.</p>
<p>As already mentioned, this approach is supported by <a class="reference external" href="https://pypi.org/project/pdm/">PDM</a>. <a class="reference external" href="https://python-poetry.org/">Poetry</a> has
<a class="reference external" href="https://discuss.python.org/t/46593/83">shown some interest</a>.</p>
<p>Per-package locking should be used when the exact set of potential target
platforms is not known when generating the lock file, as it allows installation
tools to choose the most appropriate artifacts for each platform from the
pre-approved set. For example: locking the development dependencies for an open
source project.</p>
</section>
</section>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<section id="file-name">
<h3><a class="toc-backref" href="#file-name" role="doc-backlink">File Name</a></h3>
<p>A lock file MUST be named <code class="file docutils literal notranslate"><span class="pre">pylock.toml</span></code> or match the regular expression
<code class="docutils literal notranslate"><span class="pre">r&quot;pylock\.(.+)\.toml&quot;</span></code> if a name for the lock file is desired or if multiple lock files exist.
The use of the <code class="docutils literal notranslate"><span class="pre">.toml</span></code> file extension is to make syntax highlighting in
editors easier and to reinforce the fact that the file format is meant to be
human-readable. The prefix and suffix of a named file MUST be lowercase for easy
detection and stripping off to find the name, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pylock.&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.toml&quot;</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;pylock.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">removesuffix</span><span class="p">(</span><span class="s2">&quot;.toml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This PEP has no opinion as to the location of lock files (i.e. in the root or
the subdirectory of a project).</p>
</section>
<section id="file-format">
<h3><a class="toc-backref" href="#file-format" role="doc-backlink">File Format</a></h3>
<p>The format of the file is <a class="reference external" href="https://toml.io/">TOML</a>.</p>
<p>All keys listed below are required unless otherwise noted. If two keys are
mutually exclusive to one another, then one of the keys is required while the
other is disallowed.</p>
<p>Keys in tables – including the top-level table – SHOULD be emitted by
lockers in the order they are listed in this PEP when applicable unless
another sort order is specified to minimize noise in diffs. If the keys are not
explicitly specified in this PEP, then the keys SHOULD be sorted by
lexicographic order.</p>
<p>As well, lockers SHOULD sort arrays in lexicographic order
unless otherwise specified for the same reason.</p>
<section id="version">
<h4><a class="toc-backref" href="#version" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">version</span></code></a></h4>
<ul class="simple">
<li>String</li>
<li>The version of the lock file format.</li>
<li>This PEP specifies the initial version – and only valid value until future
updates to the standard change it – as <code class="docutils literal notranslate"><span class="pre">&quot;1.0&quot;</span></code>.</li>
<li>If an installer supports the major version but not the minor version, a tool
SHOULD warn when an unknown key is seen.</li>
<li>If an installer doesn’t support a major version, it MUST raise an error.</li>
</ul>
</section>
<section id="hash-algorithm">
<h4><a class="toc-backref" href="#hash-algorithm" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">hash-algorithm</span></code></a></h4>
<ul class="simple">
<li>String</li>
<li>The name of the hash algorithm used for calculating all hash values.</li>
<li>Only a single hash algorithm is used for the entire file to allow the
<code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> table to be written inline for readability and
compactness purposes by only listing a single hash value instead of multiple
values based on multiple hash algorithms.</li>
<li>Specifying a single hash algorithm guarantees that an algorithm that the user
prefers is used consistently throughout the file without having to audit
each file hash value separately.</li>
<li>Allows for updating the entire file to a new hash algorithm without running
the risk of accidentally leaving an old hash value in the file.</li>
<li><a class="reference external" href="https://packaging.python.org/en/latest/specifications/simple-repository-api/#simple-repository-api-json" title="(in Python Packaging User Guide)"><span>JSON-based Simple API for Python Package Indexes</span></a> and the <code class="docutils literal notranslate"><span class="pre">hashes</span></code> dictionary of
of the <code class="docutils literal notranslate"><span class="pre">files</span></code> dictionary of the Project Details dictionary specifies what
values are valid and guidelines on what hash algorithms to use.</li>
<li>Failure to validate any hash values for any file that is to be installed MUST
raise an error.</li>
</ul>
</section>
<section id="dependencies">
<h4><a class="toc-backref" href="#dependencies" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code></a></h4>
<ul class="simple">
<li>Array of strings</li>
<li>A listing of the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/">dependency specifiers</a> that act as the input to the lock file,
representing the direct, top-level dependencies to be installed.</li>
</ul>
</section>
<section id="file-locks">
<h4><a class="toc-backref" href="#file-locks" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code></a></h4>
<ul class="simple">
<li>Array of tables</li>
<li>Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code>.</li>
<li>The array’s existence implies the use of the per-file locking approach.</li>
<li>An environment that meets all of the specified criteria in the table will be
considered compatible with the environment that was locked for.</li>
<li>Lockers MUST NOT generate multiple <code class="docutils literal notranslate"><span class="pre">[file-locks]</span></code> tables which would be
considered compatible for the same environment.</li>
<li>In instances where there would be a conflict but the lock is still desired,
either separate lock files can be written or per-package locking can be used.</li>
<li>Entries in array SHOULD be sorted by <code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code> lexicographically.</li>
</ul>
<section id="file-locks-name">
<h5><a class="toc-backref" href="#file-locks-name" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code></a></h5>
<ul class="simple">
<li>String</li>
<li>A unique name within the array for the environment this table represents.</li>
</ul>
</section>
<section id="file-locks-marker-values">
<h5><a class="toc-backref" href="#file-locks-marker-values" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[file-locks.marker-values]</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>Table of strings</li>
<li>The keys represent the names of <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/#environment-markers">environment markers</a> and the values are the
values for those markers.</li>
<li>Compatibility is defined by the environment’s values matching what is in the
table.</li>
</ul>
</section>
<section id="file-locks-wheel-tags">
<h5><a class="toc-backref" href="#file-locks-wheel-tags" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">file-locks.wheel-tags</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>Array of strings</li>
<li>An unordered array of <a class="reference external" href="https://packaging.python.org/en/latest/specifications/platform-compatibility-tags/">wheel tags</a> for which all tags must be supported by
the environment.</li>
<li>The array MAY not be exhaustive to allow for a smaller array as well as to
help prevent multiple <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> tables being compatible with the
same environment by having one array being a strict subset of another
<code class="docutils literal notranslate"><span class="pre">file-locks.wheel-tags</span></code> entry in the same file’s
<code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> tables.</li>
<li>Lockers MUST NOT include
<a class="reference external" href="https://packaging.python.org/en/latest/specifications/platform-compatibility-tags/#compressed-tag-sets">compressed tag sets</a>
or duplicate tags for consistency across lockers and to simplify checking for
compatibility.</li>
</ul>
</section>
</section>
<section id="package-lock">
<h4><a class="toc-backref" href="#package-lock" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code></a></h4>
<ul class="simple">
<li>Table</li>
<li>Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code>.</li>
<li>Signifies the use of the package locking approach.</li>
</ul>
<section id="package-lock-requires-python">
<h5><a class="toc-backref" href="#package-lock-requires-python" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code></a></h5>
<ul class="simple">
<li>String</li>
<li>Holds the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/version-specifiers/">version specifiers</a> for Python version compatibility for the
overall package locking.</li>
<li>Provides at-a-glance information to know if the lock file <em>may</em> apply to a
version of Python instead of having to scan the entire file to compile the
same information.</li>
</ul>
</section>
</section>
<section id="packages">
<h4><a class="toc-backref" href="#packages" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code></a></h4>
<ul class="simple">
<li>Array of tables</li>
<li>The array contains all data on the locked package versions.</li>
<li>Lockers SHOULD record packages in order by <code class="docutils literal notranslate"><span class="pre">packages.name</span></code> lexicographically
, <code class="docutils literal notranslate"><span class="pre">packages.version</span></code> by the sort order for <a class="reference external" href="https://packaging.python.org/en/latest/specifications/version-specifiers/">version specifiers</a>, and
<code class="docutils literal notranslate"><span class="pre">packages.markers</span></code> lexicographically.</li>
<li>Lockers SHOULD record keys in the same order as written in this PEP to
minimize changes when updating.</li>
<li>Entries are designed so that relevant details as to why a package is included
are in one place to make diff reading easier.</li>
</ul>
<section id="packages-name">
<h5><a class="toc-backref" href="#packages-name" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.name</span></code></a></h5>
<ul class="simple">
<li>String</li>
<li>The <a class="reference external" href="https://packaging.python.org/en/latest/specifications/name-normalization/#name-normalization">normalized name</a> of the packages.</li>
<li>Part of what’s required to uniquely identify this entry.</li>
</ul>
</section>
<section id="packages-version">
<h5><a class="toc-backref" href="#packages-version" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.version</span></code></a></h5>
<ul class="simple">
<li>String</li>
<li>The version of the packages.</li>
<li>Part of what’s required to uniquely identify this entry.</li>
</ul>
</section>
<section id="packages-multiple-entries">
<h5><a class="toc-backref" href="#packages-multiple-entries" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.multiple-entries</span></code></a></h5>
<ul class="simple">
<li>Optional (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>)</li>
<li>Boolean</li>
<li>If package locking via <code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code>, then the multiple entries for the
same package MUST be mutually exclusive via <code class="docutils literal notranslate"><span class="pre">packages.marker</span></code> (this is not
required for per-file locking as the <code class="docutils literal notranslate"><span class="pre">packages.*.lock</span></code> entries imply mutual
exclusivity).</li>
<li>Aids in auditing by knowing that there are multiple entries for the same
package that may need to be considered.</li>
</ul>
</section>
<section id="packages-description">
<h5><a class="toc-backref" href="#packages-description" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.description</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>String</li>
<li>The package’s <code class="docutils literal notranslate"><span class="pre">Summary</span></code> from its <a class="reference external" href="https://packaging.python.org/en/latest/specifications/core-metadata/">core metadata</a>.</li>
<li>Useful to help understand why a package was included in the file based on its
purpose.</li>
</ul>
</section>
<section id="packages-index-url">
<h5><a class="toc-backref" href="#packages-index-url" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.index-url</span></code></a></h5>
<ul class="simple">
<li>Optional (although mutually exclusive with
<code class="docutils literal notranslate"><span class="pre">packages.files.index-url</span></code>)</li>
<li>String</li>
<li>Stores the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/simple-repository-api/#project-list">project index</a> URL from the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/simple-repository-api/">Simple Repository API</a>.</li>
<li>Useful for generating Packaging URLs (aka PURLs).</li>
<li>When possible, lockers SHOULD include this or
<code class="docutils literal notranslate"><span class="pre">packages.files.index-url</span></code> to assist with generating
<a class="reference external" href="https://www.cisa.gov/sbom">software bill of materials</a> (aka SBOMs).</li>
</ul>
</section>
<section id="packages-marker">
<h5><a class="toc-backref" href="#packages-marker" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.marker</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>String</li>
<li>The <a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/#environment-markers">environment markers</a> expression which specifies whether this package and
version applies to the environment.</li>
<li>Only applicable via <code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code> and the package locking scenario.</li>
<li>The lack of this key means this package and version is required to be
installed.</li>
</ul>
</section>
<section id="packages-requires-python">
<h5><a class="toc-backref" href="#packages-requires-python" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.requires-python</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>String</li>
<li>Holds the <a class="reference external" href="https://packaging.python.org/en/latest/specifications/version-specifiers/">version specifiers</a> for Python version compatibility for the
package and version.</li>
<li>Useful for documenting why this package and version was included in the file.</li>
<li>Also helps document why the version restriction in
<code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code> was chosen.</li>
<li>It should not provide useful information for installers as it would be
captured by <code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code> and isn’t relevant when
<code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> is used.</li>
</ul>
</section>
<section id="packages-dependents">
<h5><a class="toc-backref" href="#packages-dependents" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.dependents</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>Array of strings</li>
<li>A record of the packages that depend on this package and version.</li>
<li>Useful for analyzing why a package happens to be listed in the file
for auditing purposes.</li>
<li>This does not provide information which influences installers.</li>
</ul>
</section>
<section id="packages-dependencies">
<h5><a class="toc-backref" href="#packages-dependencies" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.dependencies</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>Array of strings</li>
<li>A record of the dependencies of the package and version.</li>
<li>Useful in analyzing why a package happens to be listed in the file
for auditing purposes.</li>
<li>This does not provide information which influences the installer as
<code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> specifies the exact files to use and <code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code>
applicability is determined by <code class="docutils literal notranslate"><span class="pre">packages.marker</span></code>.</li>
</ul>
</section>
<section id="packages-direct">
<h5><a class="toc-backref" href="#packages-direct" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.direct</span></code></a></h5>
<ul class="simple">
<li>Optional (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>)</li>
<li>Boolean</li>
<li>Represents whether the installation is via a <a class="reference external" href="https://packaging.python.org/en/latest/specifications/direct-url/">direct URL reference</a>.</li>
</ul>
</section>
<section id="packages-files">
<h5><a class="toc-backref" href="#packages-files" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code></a></h5>
<ul class="simple">
<li>Must be specified if <code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code> and <code class="docutils literal notranslate"><span class="pre">[packages.directory]</span></code> is not
(although may be specified simultaneously with the other options).</li>
<li>Array of tables</li>
<li>Tables can be written inline.</li>
<li>Represents the files to potentially install for the package and version.</li>
<li>Entries in <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> SHOULD be lexicographically sorted by
<code class="docutils literal notranslate"><span class="pre">packages.files.name</span></code> key to minimize changes in diffs.</li>
</ul>
<section id="packages-files-name">
<h6><a class="toc-backref" href="#packages-files-name" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.files.name</span></code></a></h6>
<ul class="simple">
<li>String</li>
<li>The file name.</li>
<li>Necessary for installers to decide what to install when using package locking.</li>
</ul>
</section>
<section id="packages-files-lock">
<h6><a class="toc-backref" href="#packages-files-lock" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.files.lock</span></code></a></h6>
<ul class="simple">
<li>Required when <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> is used (does not apply under per-package
locking)</li>
<li>Array of strings</li>
<li>An array of <code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code> values which signify that the file is to be
installed when the corresponding <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> table applies to the
environment.</li>
<li>There MUST only be a single file with any one <code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code> entry per
package, regardless of version.</li>
</ul>
</section>
<section id="packages-files-index-url">
<h6><a class="toc-backref" href="#packages-files-index-url" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.files.index-url</span></code></a></h6>
<ul class="simple">
<li>Optional (although mutually exclusive with
<code class="docutils literal notranslate"><span class="pre">packages.index-url</span></code>)</li>
<li>String</li>
<li>The value has the same meaning as <code class="docutils literal notranslate"><span class="pre">packages.index-url</span></code>.</li>
<li>This key is available per-file to support <a class="pep reference internal" href="../pep-0708/" title="PEP 708 – Extending the Repository API to Mitigate Dependency Confusion Attacks">PEP 708</a> when some files override
what’s provided by another <a class="reference external" href="https://packaging.python.org/en/latest/specifications/simple-repository-api/">Simple Repository API</a> index.</li>
</ul>
</section>
<section id="packages-files-url">
<h6><a class="toc-backref" href="#packages-files-url" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.files.url</span></code></a></h6>
<ul class="simple">
<li>Optional (and mutually exclusive with <code class="docutils literal notranslate"><span class="pre">packages.path</span></code>)</li>
<li>String</li>
<li>URL where the file was found when the lock file was generated.</li>
<li>Useful for documenting where the file was originally found and potentially
where to look for the file if it is not already downloaded/available.</li>
<li>Installers MUST NOT assume the URL will always work, but installers MAY use
the URL if it happens to work.</li>
</ul>
</section>
<section id="packages-path">
<h6><a class="toc-backref" href="#packages-path" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.path</span></code></a></h6>
<ul class="simple">
<li>Optional (and mutually exclusive with <code class="docutils literal notranslate"><span class="pre">packages.path</span></code>)</li>
<li>String</li>
<li>File system path to where the file was found when the lock file was generated.</li>
<li>Path may be relative to the lock file’s location or absolute.</li>
<li>Installers MUST NOT assume the path will always work, but installers MAY use
the path if it happens to work.</li>
</ul>
</section>
<section id="packages-files-hash">
<h6><a class="toc-backref" href="#packages-files-hash" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.files.hash</span></code></a></h6>
<ul class="simple">
<li>String</li>
<li>The hash value of the file contents using the hash algorithm specified by
<code class="docutils literal notranslate"><span class="pre">hash-algorithm</span></code>.</li>
<li>Used by installers to verify the file contents match what the locker worked
with.</li>
</ul>
</section>
</section>
<section id="packages-vcs">
<h5><a class="toc-backref" href="#packages-vcs" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code></a></h5>
<ul class="simple">
<li>Must be specified if <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> and <code class="docutils literal notranslate"><span class="pre">[packages.directory]</span></code> is
not (although may be specified simultaneously with the other options).</li>
<li>Table representing the version control system containing the package and
version.</li>
</ul>
<section id="packages-vcs-type">
<h6><a class="toc-backref" href="#packages-vcs-type" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.vcs.type</span></code></a></h6>
<ul class="simple">
<li>String</li>
<li>The type of version control system used.</li>
<li>The valid values are specified by the
<a class="reference external" href="https://packaging.python.org/en/latest/specifications/direct-url-data-structure/#registered-vcs">registered VCSs</a>
of the direct URL data structure.</li>
</ul>
</section>
<section id="packages-vcs-url">
<h6><a class="toc-backref" href="#packages-vcs-url" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.vcs.url</span></code></a></h6>
<ul class="simple">
<li>Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">packages.vcs.path</span></code></li>
<li>String</li>
<li>The URL of where the repository was located when the lock file was generated.</li>
</ul>
</section>
<section id="packages-vcs-path">
<h6><a class="toc-backref" href="#packages-vcs-path" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.vcs.path</span></code></a></h6>
<ul class="simple">
<li>Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">packages.vcs.url</span></code></li>
<li>String</li>
<li>The file system path where the repository was located when the lock file was
generated.</li>
<li>The path may be relative to the lock file or absolute.</li>
</ul>
</section>
<section id="packages-vcs-commit">
<h6><a class="toc-backref" href="#packages-vcs-commit" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.vcs.commit</span></code></a></h6>
<ul class="simple">
<li>String</li>
<li>The commit ID for the repository which represents the package and version.</li>
<li>The value MUST be immutable for the VCS for security purposes
(e.g. no Git tags).</li>
</ul>
</section>
<section id="packages-vcs-lock">
<h6><a class="toc-backref" href="#packages-vcs-lock" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.vcs.lock</span></code></a></h6>
<ul class="simple">
<li>Required when <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> is used</li>
<li>An array of strings</li>
<li>An array of <code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code> values which signify that the repository at the
specified commit is to be installed when the corresponding <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code>
table applies to the environment.</li>
<li>A name in the array may only appear if no file listed in
<code class="docutils literal notranslate"><span class="pre">packages.files.lock</span></code> contains the name for the same package, regardless of
version.</li>
</ul>
</section>
</section>
<section id="packages-directory">
<h5><a class="toc-backref" href="#packages-directory" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[packages.directory]</span></code></a></h5>
<ul class="simple">
<li>Must be specified if <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> and <code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code> is not
and doing per-package locking.</li>
<li>Table representing a source tree found on the local file system.</li>
</ul>
<section id="packages-directory-path">
<h6><a class="toc-backref" href="#packages-directory-path" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.directory.path</span></code></a></h6>
<ul class="simple">
<li>String</li>
<li>A local directory where a source tree for the package and version exists.</li>
<li>The path MUST use forward slashes as the path separator.</li>
<li>If the path is relative it is relative to the location of the lock file.</li>
</ul>
</section>
<section id="packages-directory-editable">
<h6><a class="toc-backref" href="#packages-directory-editable" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">packages.directory.editable</span></code></a></h6>
<ul class="simple">
<li>Boolean</li>
<li>Optional (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>)</li>
<li>Flag representing whether the source tree should be installed as an editable
install.</li>
</ul>
</section>
</section>
<section id="packages-tool">
<h5><a class="toc-backref" href="#packages-tool" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[packages.tool]</span></code></a></h5>
<ul class="simple">
<li>Optional</li>
<li>Table</li>
<li>Similar usage as that of the <code class="docutils literal notranslate"><span class="pre">[tool]</span></code> table from the
<a class="reference external" href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#pyproject-toml-specification">pyproject.toml specification</a> , but at the package version level instead of
at the lock file level (which is also available via <code class="docutils literal notranslate"><span class="pre">[tool]</span></code>).</li>
<li>Useful for scoping package version/release details (e.g., recording signing
identities to then use to verify package integrity separately from where the
package is hosted, prototyping future extensions to this file format, etc.).</li>
</ul>
</section>
</section>
<section id="tool">
<h4><a class="toc-backref" href="#tool" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">[tool]</span></code></a></h4>
<ul class="simple">
<li>Optional</li>
<li>Table</li>
<li>Same usage as that of the equivalent <code class="docutils literal notranslate"><span class="pre">[tool]</span></code> table from the
<a class="reference external" href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#pyproject-toml-specification">pyproject.toml specification</a>.</li>
</ul>
</section>
</section>
<section id="examples">
<h3><a class="toc-backref" href="#examples" role="doc-backlink">Examples</a></h3>
<section id="id1">
<h4><a class="toc-backref" href="#id1" role="doc-backlink">Per-file locking</a></h4>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.0&#39;</span>
<span class="n">hash-algorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sha256&#39;</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cattrs&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span><span class="p">]</span>

<span class="k">[[file-locks]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CPython 3.12 on manylinux 2.17 x86-64&#39;</span>
<span class="n">marker-values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="n">wheel-tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-cp312-manylinux_2_17_x86_64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;py3-none-any&#39;</span><span class="p">]</span>

<span class="k">[[file-locks]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;CPython 3.12 on Windows x64&#39;</span>
<span class="n">marker-values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
<span class="n">wheel-tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-cp312-win_amd64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;py3-none-any&#39;</span><span class="p">]</span>

<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;attrs&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;23.2.0&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Classes Without Boilerplate&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.7&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cattrs&#39;</span><span class="p">]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;attrs-23.2.0-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;CPython 3.12 on manylinux 2.17 x86-64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;CPython 3.12 on Windows x64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/e0/44/827b2a91a5816512fcaf3cc4ebc465ccd5d598c45cefa6703fcf4a79018f/attrs-23.2.0-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;99b87a485a5820b23b879f04c2305b44b951b502fd64be915879d77a7e8fc6f1&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cattrs&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;23.2.3&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Composable complex class support for attrs and dataclasses.&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.8&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;attrs&#39;</span><span class="p">]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;cattrs-23.2.3-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;CPython 3.12 on manylinux 2.17 x86-64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;CPython 3.12 on Windows x64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/b3/0d/cd4a4071c7f38385dc5ba91286723b4d1090b87815db48216212c6c6c30e/cattrs-23.2.3-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;0341994d94971052e9ee70662542699a3162ea1e0c62f7ce1b4a57f563685108&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2.0.1&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Fundamental package for array computing in Python&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.9&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;numpy-2.0.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-manylinux_2_17_x86_64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/2c/f3/61eeef119beb37decb58e7cb29940f19a1464b8608f2cab8a8616aba75fd/numpy-2.0.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;6790654cb13eab303d8402354fabd47472b24635700f631f041bd0b65e37298a&#39;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;numpy-2.0.1-cp312-cp312-win_amd64.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-win_amd64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/b5/59/f6ad30785a6578ad85ed9c2785f271b39c3e5b6412c66e810d2c60934c9f/numpy-2.0.1-cp312-cp312-win_amd64.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;bb2124fdc6e62baae159ebcfa368708867eb56806804d005860b6007388df171&#39;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="per-package-locking">
<h4><a class="toc-backref" href="#per-package-locking" role="doc-backlink">Per-package locking</a></h4>
<p>Some values for <code class="docutils literal notranslate"><span class="pre">packages.files.url</span></code> left out to make creating this
example more easily as it was done by hand.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.0&#39;</span>
<span class="n">hash-algorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sha256&#39;</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cattrs&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span><span class="p">]</span>

<span class="k">[package-lock]</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&gt;=3.9&quot;</span>


<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;attrs&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;23.2.0&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Classes Without Boilerplate&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.7&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cattrs&#39;</span><span class="p">]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;attrs-23.2.0-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-manylinux_2_17_x86_64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cp312-win_amd64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/e0/44/827b2a91a5816512fcaf3cc4ebc465ccd5d598c45cefa6703fcf4a79018f/attrs-23.2.0-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;99b87a485a5820b23b879f04c2305b44b951b502fd64be915879d77a7e8fc6f1&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cattrs&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;23.2.3&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Composable complex class support for attrs and dataclasses.&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.8&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;attrs&#39;</span><span class="p">]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;cattrs-23.2.3-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;cp312-manylinux_2_17_x86_64&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;cp312-win_amd64&#39;</span><span class="p">],</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;https://files.pythonhosted.org/packages/b3/0d/cd4a4071c7f38385dc5ba91286723b4d1090b87815db48216212c6c6c30e/cattrs-23.2.3-py3-none-any.whl&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s1">&#39;0341994d94971052e9ee70662542699a3162ea1e0c62f7ce1b4a57f563685108&#39;</span><span class="p">}</span>
<span class="p">]</span>

<span class="k">[[packages]]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2.0.1&#39;</span>
<span class="n">multiple-entries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Fundamental package for array computing in Python&#39;</span>
<span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&gt;=3.9&#39;</span>
<span class="n">dependents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">direct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-macosx_10_9_x86_64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:6bf4e6f4a2a2e26655717a1983ef6324f2664d7011f6ef7482e8c0b3d51e82ac&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-macosx_11_0_arm64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:7d6fddc5fe258d3328cd8e3d7d3e02234c5d70e01ebe377a6ab92adb14039cb4&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-macosx_14_0_arm64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:5daab361be6ddeb299a918a7c0864fa8618af66019138263247af405018b04e1&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-macosx_14_0_x86_64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:ea2326a4dca88e4a274ba3a4405eb6c6467d3ffbd8c7d38632502eaae3820587&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:529af13c5f4b7a932fb0e1911d3a75da204eff023ee5e0e79c1751564221a5c8&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:6790654cb13eab303d8402354fabd47472b24635700f631f041bd0b65e37298a&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-musllinux_1_1_x86_64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:cbab9fc9c391700e3e1287666dfd82d8666d10e69a6c4a09ab97574c0b7ee0a7&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-musllinux_1_2_aarch64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:99d0d92a5e3613c33a5f01db206a33f8fdf3d71f2912b0de1739894668b7a93b&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-win32.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:173a00b9995f73b79eb0191129f2455f1e34c203f559dd118636858cc452a1bf&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;numpy-2.0.1-cp312-cp312-win_amd64.whl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;sha256:bb2124fdc6e62baae159ebcfa368708867eb56806804d005860b6007388df171&quot;</span><span class="p">},</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="expectations-for-lockers">
<h3><a class="toc-backref" href="#expectations-for-lockers" role="doc-backlink">Expectations for Lockers</a></h3>
<ul class="simple">
<li>When creating a lock file for <code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code>, the locker SHOULD read
the metadata of <strong>all</strong> files that end up being listed in
<code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> to make sure all potential metadata cases are covered</li>
<li>If a locker chooses not to check every file for its metadata, the tool MUST
either provide the user with the option to have all files checked (whether
that is opt-in or out is left up to the tool), or the user is somehow notified
that such a standards-violating shortcut is being taken (whether this is by
documentation or at runtime is left to the tool)</li>
<li>Lockers MAY want to provide a way to let users provide the information
necessary to install for multiple environments at once when doing per-file
locking, e.g. supporting a JSON file format which specifies wheel tags and
marker values much like in <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> for which multiple files can be
specified, which could then be directly recorded in the corresponding
<code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> table (if it allowed for unambiguous per-file locking
environment selection)</li>
</ul>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;marker-values&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;&lt;marker&gt;&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;value&gt;&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;wheel-tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;tag&gt;&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="expectations-for-installers">
<h3><a class="toc-backref" href="#expectations-for-installers" role="doc-backlink">Expectations for Installers</a></h3>
<ul class="simple">
<li>Installers MAY support installation of non-binary files
(i.e. source distributions, source trees, and VCS), but are not required to.</li>
<li>Installers MUST provide a way to avoid non-binary file installation for
reproducibility and security purposes.</li>
<li>Installers SHOULD make it opt-in to use non-binary file installation to
facilitate a secure-by-default approach.</li>
<li>Under per-file locking, if what to install is ambiguous then the installer
MUST raise an error.</li>
</ul>
<section id="installing-for-per-file-locking">
<h4><a class="toc-backref" href="#installing-for-per-file-locking" role="doc-backlink">Installing for per-file locking</a></h4>
<ul class="simple">
<li>If no compatible environment is found an error MUST be raised.</li>
<li>If multiple environments are found to be compatible then an error MUST be
raised.</li>
<li>If a <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> contains multiple matching entries an error MUST
be raised due to ambiguity for what is to be installed.</li>
<li>If multiple <code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code> entries for the same package have matching files
an error MUST be raised due to ambiguity for what is to be installed.</li>
</ul>
<section id="example-workflow">
<h5><a class="toc-backref" href="#example-workflow" role="doc-backlink">Example workflow</a></h5>
<ul class="simple">
<li>Iterate through each <code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code> table to find the one that applies to
the environment being installed for.</li>
<li>If no compatible environment is found an error MUST be raised.</li>
<li>If multiple environments are found to be compatible then an error MUST be
raised.</li>
<li>For the compatible environment, iterate through each entry in
<code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code>.</li>
<li>For each <code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code> entry, iterate through <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> to
look for any files with <code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code> listed in <code class="docutils literal notranslate"><span class="pre">packages.files.lock</span></code>.</li>
<li>If a file is found with a matching lock name, add it to the list of candidate
files to install and move on to the next <code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code> entry.</li>
<li>If no file is found then check if <code class="docutils literal notranslate"><span class="pre">packages.vcs.lock</span></code> contains a match (no
match is also acceptable).</li>
<li>If a <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code> contains multiple matching entries an error MUST
be raised due to ambiguity for what is to be installed.</li>
<li>If multiple <code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code> entries for the same package have matching files
an error MUST be raised due to ambiguity for what is to be installed.</li>
<li>Find and verify the candidate files and/or VCS entries based on their hash or
commit ID as appropriate.</li>
<li>Install the candidate files.</li>
</ul>
</section>
</section>
<section id="installing-for-package-locking">
<h4><a class="toc-backref" href="#installing-for-package-locking" role="doc-backlink">Installing for package locking</a></h4>
<ul class="simple">
<li>Verify that the environment is compatible with
<code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code>; if it isn’t an error MUST be raised.</li>
<li>If no way to install a required package is found, an error MUST be raised.</li>
</ul>
<section id="id2">
<h5><a class="toc-backref" href="#id2" role="doc-backlink">Example workflow</a></h5>
<ul class="simple">
<li>Verify that the environment is compatible with
<code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code>; if it isn’t an error MUST be raised.</li>
<li>Iterate through each entry in <code class="docutils literal notranslate"><span class="pre">[packages]]</span></code>.</li>
<li>For each entry, if there’s a <code class="docutils literal notranslate"><span class="pre">packages.marker</span></code> key, evaluate the expression.<ul>
<li>If the expression is false, then move on.</li>
<li>Otherwise the package entry must be installed somehow.</li>
</ul>
</li>
<li>Iterate through the files listed in <code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code>, looking for the
“best” file to install.</li>
<li>If no file is found, check for <code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code>.</li>
<li>It no VCS is found, check for <code class="docutils literal notranslate"><span class="pre">packages.directory</span></code>.</li>
<li>If no match is found, an error MUST be raised.</li>
<li>Find and verify the selected files and/or VCS entries based on their hash or
commit ID as appropriate.</li>
<li>Install the selected files.</li>
</ul>
</section>
</section>
</section>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility" role="doc-backlink">Backwards Compatibility</a></h2>
<p>Because there is no preexisting lock file format, there are no explicit
backwards-compatibility concerns in terms of Python packaging standards.</p>
<p>As for packaging tools themselves, that will be a per-tool decision. For tools
that don’t document their lock file format, they could choose to simply start
using the format internally and then transition to saving their lock files with
a name supported by this PEP. For tools with a preexisting, documented format,
they could provide an option to choose which format to emit.</p>
</section>
<section id="security-implications">
<h2><a class="toc-backref" href="#security-implications" role="doc-backlink">Security Implications</a></h2>
<p>The hope is that by standardizing on a lock file format that starts from a
security-first posture it will help make overall packaging installation safer.
However, this PEP does not solve all potential security concerns.</p>
<p>One potential concern is tampering with a lock file. If a lock file is not kept
in source control and properly audited, a bad actor could change the file in
nefarious ways (e.g. point to a malware version of a package). Tampering could
also occur in transit to e.g. a cloud provider who will perform an installation
on the user’s behalf. Both could be mitigated by signing the lock file either
within the file in a <code class="docutils literal notranslate"><span class="pre">[tool]</span></code> entry or via a side channel external to the lock
file itself.</p>
<p>This PEP does not do anything to prevent a user from installing an incorrect
packages. While including many details to help in auditing a package’s inclusion,
there isn’t any mechanism to stop e.g. name confusion attacks via typosquatting.
Lockers may be able to provide some UX to help with this (e.g. by providing
download counts for a package).</p>
</section>
<section id="how-to-teach-this">
<h2><a class="toc-backref" href="#how-to-teach-this" role="doc-backlink">How to Teach This</a></h2>
<p>Users should be informed that when they ask to install some package, that
package may have its own dependencies, those dependencies may have dependencies,
and so on. Without writing down what gets installed as part of installing the
package they requested, things could change from underneath them (e.g. package
versions). Changes to the underlying dependencies can lead to accidental
breakage of their code. Lock files help deal with that by providing a way to
write down what was installed.</p>
<p>Having what to install written down also helps in collaborating with others. By
agreeing to a lock file’s contents, everyone ends up with the same packages
installed. This helps make sure no one relies on e.g. an API that’s only
available in a certain version that not everyone working on the project has
installed.</p>
<p>Lock files also help with security by making sure you always get the same files
installed and not a malicious one that someone may have slipped in. It also
lets one be more deliberate in upgrading their dependencies and thus making sure
the change is on purpose and not one slipped in by a bad actor.</p>
</section>
<section id="reference-implementation">
<h2><a class="toc-backref" href="#reference-implementation" role="doc-backlink">Reference Implementation</a></h2>
<p>A rough proof-of-concept for per-file locking can be found at
<a class="reference external" href="https://github.com/brettcannon/mousebender/tree/pep">https://github.com/brettcannon/mousebender/tree/pep</a>. An example lock file can
be seen at
<a class="reference external" href="https://github.com/brettcannon/mousebender/blob/pep/pylock.example.toml">https://github.com/brettcannon/mousebender/blob/pep/pylock.example.toml</a>.</p>
<p>For per-package locking, <a class="reference external" href="https://pypi.org/project/pdm/">PDM</a> indirectly proves the approach works as this PEP
maintains equivalent data as PDM does for its lock files (whose format was
inspired by <a class="reference external" href="https://python-poetry.org/">Poetry</a>). Some of the details of PDM’s approach are covered in
<a class="reference external" href="https://frostming.com/en/2024/pdm-lockfile/">https://frostming.com/en/2024/pdm-lockfile/</a> and
<a class="reference external" href="https://frostming.com/en/2024/pdm-lock-strategy/">https://frostming.com/en/2024/pdm-lock-strategy/</a>.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas" role="doc-backlink">Rejected Ideas</a></h2>
<section id="only-support-package-locking">
<h3><a class="toc-backref" href="#only-support-package-locking" role="doc-backlink">Only support package locking</a></h3>
<p>At one point it was suggested to skip per-file locking and only support package
locking as the former was not explicitly supported in the larger Python
ecosystem while the latter was. But because this PEP has taken the position
that security is important and per-file locking is the more secure of the two
options, leaving out per-file locking was never considered.</p>
</section>
<section id="specifying-a-new-core-metadata-version-that-requires-consistent-metadata-across-files">
<h3><a class="toc-backref" href="#specifying-a-new-core-metadata-version-that-requires-consistent-metadata-across-files" role="doc-backlink">Specifying a new core metadata version that requires consistent metadata across files</a></h3>
<p>At one point, to handle the issue of metadata varying between files and thus
require examining every released file for a package and version for accurate
locking results, the idea was floated to introduce a new core metadata version
which would require all metadata for all wheel files be the same for a single
version of a packages. Ultimately, though, it was deemed unnecessary as this PEP
will put pressure on people to make files consistent for performance reasons or
to make indexes provide all the metadata separate from the wheel files
themselves. As well, there’s no easy enforcement mechanism, and so community
expectation would work as well as a new metadata version.</p>
</section>
<section id="have-the-installer-do-dependency-resolution">
<h3><a class="toc-backref" href="#have-the-installer-do-dependency-resolution" role="doc-backlink">Have the installer do dependency resolution</a></h3>
<p>In order to support a format more akin to how Poetry worked when this PEP was
drafted, it was suggested that lockers effectively record the packages and their
versions which may be necessary to make an install work in any possible
scenario, and then the installer resolves what to install. But that complicates
auditing a lock file by requiring much more mental effort to know what packages
may be installed in any given scenario. Also, one of the Poetry developers
<a class="reference external" href="https://discuss.python.org/t/lock-files-again-but-this-time-w-sdists/46593/83">suggested</a>
that markers as represented in the package locking approach of this PEP may be
sufficient to cover the needs of Poetry. Not having the installer do a
resolution also simplifies their implementation, centralizing complexity in
lockers.</p>
</section>
<section id="requiring-specific-hash-algorithm-support">
<h3><a class="toc-backref" href="#requiring-specific-hash-algorithm-support" role="doc-backlink">Requiring specific hash algorithm support</a></h3>
<p>It was proposed to require a baseline hash algorithm for the files. This was
rejected as no other Python packaging specification requires specific hash
algorithm support. As well, the minimum hash algorithm suggested may eventually
become an outdated/unsafe suggestion, requiring further updates. In order to
promote using the best algorithm at all times, no baseline is provided to avoid
simply defaulting to the baseline in tools without considering the security
ramifications of that hash algorithm.</p>
</section>
<section id="file-naming">
<h3><a class="toc-backref" href="#file-naming" role="doc-backlink">File naming</a></h3>
<section id="using-pylock-toml-as-the-file-name">
<h4><a class="toc-backref" href="#using-pylock-toml-as-the-file-name" role="doc-backlink">Using <code class="docutils literal notranslate"><span class="pre">*.pylock.toml</span></code> as the file name</a></h4>
<p>It was proposed to put the <code class="docutils literal notranslate"><span class="pre">pylock</span></code> constant part of the file name after the
identifier for the purpose of the lock file. It was decided not to do this so
that lock files would sort together when looking at directory contents instead
of purely based on their purpose which could spread them out in a directory.</p>
</section>
<section id="using-pylock-as-the-file-name">
<h4><a class="toc-backref" href="#using-pylock-as-the-file-name" role="doc-backlink">Using <code class="docutils literal notranslate"><span class="pre">*.pylock</span></code> as the file name</a></h4>
<p>Not using <code class="docutils literal notranslate"><span class="pre">.toml</span></code> as the file extension and instead making it <code class="docutils literal notranslate"><span class="pre">.pylock</span></code>
itself was proposed. This was decided against so that code editors would know
how to provide syntax highlighting to a lock file without having special
knowledge about the file extension.</p>
</section>
<section id="not-having-a-naming-convention-for-the-file">
<h4><a class="toc-backref" href="#not-having-a-naming-convention-for-the-file" role="doc-backlink">Not having a naming convention for the file</a></h4>
<p>Having no requirements or guidance for a lock file’s name was considered, but
ultimately rejected. By having a standardized naming convention it makes it easy
to identify a lock file for both a human and a code editor. This helps
facilitate discovery when e.g. a tool wants to know all of the lock files that
are available.</p>
</section>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">File format</a></h3>
<section id="use-json-over-toml">
<h4><a class="toc-backref" href="#use-json-over-toml" role="doc-backlink">Use JSON over TOML</a></h4>
<p>Since having a format that is machine-writable was a goal of this PEP, it was
suggested to use JSON. But it was deemed less human-readable than TOML while
not improving on the machine-writable aspect enough to warrant the change.</p>
</section>
<section id="use-yaml-over-toml">
<h4><a class="toc-backref" href="#use-yaml-over-toml" role="doc-backlink">Use YAML over TOML</a></h4>
<p>Some argued that YAML met the machine-writable/human-readable requirement in a
better way than TOML. But as that’s subjective and <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> already
existed as the human-writable file used by Python packaging standards it was
deemed more important to keep using TOML.</p>
</section>
</section>
<section id="other-keys">
<h3><a class="toc-backref" href="#other-keys" role="doc-backlink">Other keys</a></h3>
<section id="multiple-hashes-per-file">
<h4><a class="toc-backref" href="#multiple-hashes-per-file" role="doc-backlink">Multiple hashes per file</a></h4>
<p>An initial version of this PEP proposed supporting multiple hashes per file. The
idea was to allow one to choose which hashing algorithm they wanted to go with
when installing. But upon reflection it seemed like an unnecessary complication
as there was no guarantee the hashes provided would satisfy the user’s needs.
As well, if the single hash algorithm used in the lock file wasn’t sufficient,
rehashing the files involved as a way to migrate to a different algorithm didn’t
seem insurmountable.</p>
</section>
<section id="hashing-the-contents-of-the-lock-file-itself">
<h4><a class="toc-backref" href="#hashing-the-contents-of-the-lock-file-itself" role="doc-backlink">Hashing the contents of the lock file itself</a></h4>
<p>Hashing the contents of the bytes of the file and storing hash value within the
file itself was proposed at some point. This was removed to make it easier
when merging changes to the lock file as each merge would have to recalculate
the hash value to avoid a merge conflict.</p>
<p>Hashing the semantic contents of the file was also proposed, but it would lead
to the same merge conflict issue.</p>
<p>Regardless of which contents were hashed, either approach could have the hash
value stored outside of the file if such a hash was desired.</p>
</section>
<section id="recording-the-creation-date-of-the-lock-file">
<h4><a class="toc-backref" href="#recording-the-creation-date-of-the-lock-file" role="doc-backlink">Recording the creation date of the lock file</a></h4>
<p>To know how potentially stale the lock file was, an earlier proposal suggested
recording the creation date of the lock file. But for some same merge conflict
reasons as storing the hash of the file contents, this idea was dropped.</p>
</section>
<section id="recording-the-package-indexes-used">
<h4><a class="toc-backref" href="#recording-the-package-indexes-used" role="doc-backlink">Recording the package indexes used</a></h4>
<p>Recording what package indexes were used by the locker to decide what to lock
for was considered. In the end, though, it was rejected as it was deemed
unnecessary bookkeeping.</p>
</section>
<section id="locking-build-requirements-for-sdists">
<h4><a class="toc-backref" href="#locking-build-requirements-for-sdists" role="doc-backlink">Locking build requirements for sdists</a></h4>
<p>An earlier version of this PEP tried to lock the build requirements for sdists
under a <code class="docutils literal notranslate"><span class="pre">packages.build-requires</span></code> key. Unfortunately it confused enough people
about how it was expected to operate and there were enough edge case issues to
decide it wasn’t worth trying to do in this PEP upfront. Instead, a future PEP
could propose a solution.</p>
</section>
</section>
</section>
<section id="open-issues">
<h2><a class="toc-backref" href="#open-issues" role="doc-backlink">Open Issues</a></h2>
<p>N/A</p>
</section>
<section id="acknowledgements">
<h2><a class="toc-backref" href="#acknowledgements" role="doc-backlink">Acknowledgements</a></h2>
<p>Thanks to everyone who participated in the discussions in
<a class="reference external" href="https://discuss.python.org/t/lock-files-again-but-this-time-w-sdists/46593/">https://discuss.python.org/t/lock-files-again-but-this-time-w-sdists/46593/</a>,
especially Alyssa Coghlan who probably caused the biggest structural shifts from
the initial proposal.</p>
<p>Also thanks to Randy Döring, Seth Michael Larson, Paul Moore, and Ofek Lev for
providing feedback on a draft version of this PEP.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/peps/pep-0751.rst">https://github.com/python/peps/blob/main/peps/pep-0751.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/peps/pep-0751.rst">2024-09-17 21:12:12 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a><ul>
<li><a class="reference internal" href="#locking-scenarios">Locking Scenarios</a><ul>
<li><a class="reference internal" href="#per-file-locking">Per-file Locking</a></li>
<li><a class="reference internal" href="#package-locking">Package Locking</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#file-name">File Name</a></li>
<li><a class="reference internal" href="#file-format">File Format</a><ul>
<li><a class="reference internal" href="#version"><code class="docutils literal notranslate"><span class="pre">version</span></code></a></li>
<li><a class="reference internal" href="#hash-algorithm"><code class="docutils literal notranslate"><span class="pre">hash-algorithm</span></code></a></li>
<li><a class="reference internal" href="#dependencies"><code class="docutils literal notranslate"><span class="pre">dependencies</span></code></a></li>
<li><a class="reference internal" href="#file-locks"><code class="docutils literal notranslate"><span class="pre">[[file-locks]]</span></code></a><ul>
<li><a class="reference internal" href="#file-locks-name"><code class="docutils literal notranslate"><span class="pre">file-locks.name</span></code></a></li>
<li><a class="reference internal" href="#file-locks-marker-values"><code class="docutils literal notranslate"><span class="pre">[file-locks.marker-values]</span></code></a></li>
<li><a class="reference internal" href="#file-locks-wheel-tags"><code class="docutils literal notranslate"><span class="pre">file-locks.wheel-tags</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#package-lock"><code class="docutils literal notranslate"><span class="pre">[package-lock]</span></code></a><ul>
<li><a class="reference internal" href="#package-lock-requires-python"><code class="docutils literal notranslate"><span class="pre">package-lock.requires-python</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages"><code class="docutils literal notranslate"><span class="pre">[[packages]]</span></code></a><ul>
<li><a class="reference internal" href="#packages-name"><code class="docutils literal notranslate"><span class="pre">packages.name</span></code></a></li>
<li><a class="reference internal" href="#packages-version"><code class="docutils literal notranslate"><span class="pre">packages.version</span></code></a></li>
<li><a class="reference internal" href="#packages-multiple-entries"><code class="docutils literal notranslate"><span class="pre">packages.multiple-entries</span></code></a></li>
<li><a class="reference internal" href="#packages-description"><code class="docutils literal notranslate"><span class="pre">packages.description</span></code></a></li>
<li><a class="reference internal" href="#packages-index-url"><code class="docutils literal notranslate"><span class="pre">packages.index-url</span></code></a></li>
<li><a class="reference internal" href="#packages-marker"><code class="docutils literal notranslate"><span class="pre">packages.marker</span></code></a></li>
<li><a class="reference internal" href="#packages-requires-python"><code class="docutils literal notranslate"><span class="pre">packages.requires-python</span></code></a></li>
<li><a class="reference internal" href="#packages-dependents"><code class="docutils literal notranslate"><span class="pre">packages.dependents</span></code></a></li>
<li><a class="reference internal" href="#packages-dependencies"><code class="docutils literal notranslate"><span class="pre">packages.dependencies</span></code></a></li>
<li><a class="reference internal" href="#packages-direct"><code class="docutils literal notranslate"><span class="pre">packages.direct</span></code></a></li>
<li><a class="reference internal" href="#packages-files"><code class="docutils literal notranslate"><span class="pre">[[packages.files]]</span></code></a><ul>
<li><a class="reference internal" href="#packages-files-name"><code class="docutils literal notranslate"><span class="pre">packages.files.name</span></code></a></li>
<li><a class="reference internal" href="#packages-files-lock"><code class="docutils literal notranslate"><span class="pre">packages.files.lock</span></code></a></li>
<li><a class="reference internal" href="#packages-files-index-url"><code class="docutils literal notranslate"><span class="pre">packages.files.index-url</span></code></a></li>
<li><a class="reference internal" href="#packages-files-url"><code class="docutils literal notranslate"><span class="pre">packages.files.url</span></code></a></li>
<li><a class="reference internal" href="#packages-path"><code class="docutils literal notranslate"><span class="pre">packages.path</span></code></a></li>
<li><a class="reference internal" href="#packages-files-hash"><code class="docutils literal notranslate"><span class="pre">packages.files.hash</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-vcs"><code class="docutils literal notranslate"><span class="pre">[packages.vcs]</span></code></a><ul>
<li><a class="reference internal" href="#packages-vcs-type"><code class="docutils literal notranslate"><span class="pre">packages.vcs.type</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-url"><code class="docutils literal notranslate"><span class="pre">packages.vcs.url</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-path"><code class="docutils literal notranslate"><span class="pre">packages.vcs.path</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-commit"><code class="docutils literal notranslate"><span class="pre">packages.vcs.commit</span></code></a></li>
<li><a class="reference internal" href="#packages-vcs-lock"><code class="docutils literal notranslate"><span class="pre">packages.vcs.lock</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-directory"><code class="docutils literal notranslate"><span class="pre">[packages.directory]</span></code></a><ul>
<li><a class="reference internal" href="#packages-directory-path"><code class="docutils literal notranslate"><span class="pre">packages.directory.path</span></code></a></li>
<li><a class="reference internal" href="#packages-directory-editable"><code class="docutils literal notranslate"><span class="pre">packages.directory.editable</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#packages-tool"><code class="docutils literal notranslate"><span class="pre">[packages.tool]</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tool"><code class="docutils literal notranslate"><span class="pre">[tool]</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#id1">Per-file locking</a></li>
<li><a class="reference internal" href="#per-package-locking">Per-package locking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expectations-for-lockers">Expectations for Lockers</a></li>
<li><a class="reference internal" href="#expectations-for-installers">Expectations for Installers</a><ul>
<li><a class="reference internal" href="#installing-for-per-file-locking">Installing for per-file locking</a><ul>
<li><a class="reference internal" href="#example-workflow">Example workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-for-package-locking">Installing for package locking</a><ul>
<li><a class="reference internal" href="#id2">Example workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#security-implications">Security Implications</a></li>
<li><a class="reference internal" href="#how-to-teach-this">How to Teach This</a></li>
<li><a class="reference internal" href="#reference-implementation">Reference Implementation</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#only-support-package-locking">Only support package locking</a></li>
<li><a class="reference internal" href="#specifying-a-new-core-metadata-version-that-requires-consistent-metadata-across-files">Specifying a new core metadata version that requires consistent metadata across files</a></li>
<li><a class="reference internal" href="#have-the-installer-do-dependency-resolution">Have the installer do dependency resolution</a></li>
<li><a class="reference internal" href="#requiring-specific-hash-algorithm-support">Requiring specific hash algorithm support</a></li>
<li><a class="reference internal" href="#file-naming">File naming</a><ul>
<li><a class="reference internal" href="#using-pylock-toml-as-the-file-name">Using <code class="docutils literal notranslate"><span class="pre">*.pylock.toml</span></code> as the file name</a></li>
<li><a class="reference internal" href="#using-pylock-as-the-file-name">Using <code class="docutils literal notranslate"><span class="pre">*.pylock</span></code> as the file name</a></li>
<li><a class="reference internal" href="#not-having-a-naming-convention-for-the-file">Not having a naming convention for the file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">File format</a><ul>
<li><a class="reference internal" href="#use-json-over-toml">Use JSON over TOML</a></li>
<li><a class="reference internal" href="#use-yaml-over-toml">Use YAML over TOML</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-keys">Other keys</a><ul>
<li><a class="reference internal" href="#multiple-hashes-per-file">Multiple hashes per file</a></li>
<li><a class="reference internal" href="#hashing-the-contents-of-the-lock-file-itself">Hashing the contents of the lock file itself</a></li>
<li><a class="reference internal" href="#recording-the-creation-date-of-the-lock-file">Recording the creation date of the lock file</a></li>
<li><a class="reference internal" href="#recording-the-package-indexes-used">Recording the package indexes used</a></li>
<li><a class="reference internal" href="#locking-build-requirements-for-sdists">Locking build requirements for sdists</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#open-issues">Open Issues</a></li>
<li><a class="reference internal" href="#acknowledgements">Acknowledgements</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/peps/pep-0751.rst">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
    <script src="../_static/sticky_banner.js"></script>
</body>
</html>